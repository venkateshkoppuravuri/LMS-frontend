(this["webpackJsonpuser-management"]=this["webpackJsonpuser-management"]||[]).push([[0],{100:function(e,t,a){e.exports=a(150)},105:function(e,t,a){},107:function(e,t,a){},135:function(e,t,a){},142:function(e,t,a){e.exports=a.p+"static/media/golden1.8804e516.jpeg"},143:function(e,t,a){},144:function(e,t,a){},146:function(e,t,a){},147:function(e,t,a){},148:function(e,t,a){},149:function(e,t,a){},150:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(11),c=a.n(s),l=(a(105),a(106),a(107),a(30)),o=a(9),i=a(18),u=a.n(i),m=a(28),d=a(8),p=a(184),h=a(90),f=a(181),g=a(182),E=a(85),b=a(49),v=a(84);a(117),a(118);b.initializeApp({apiKey:"AIzaSyB7L8az3ZXHUJBigs9tcRQTZwC2Koiuy4E",authDomain:"clear-gantry-283402.firebaseapp.com",databaseURL:"https://clear-gantry-283402.firebaseio.com",projectId:"clear-gantry-283402",storageBucket:"clear-gantry-283402.appspot.com",messagingSenderId:"1040274309787",appId:"1:1040274309787:web:46952bd121dd1b80ab7c3e"});var y=b.auth(),S=b.firestore(),C=v.storage(),O={ID:"id",PhotoURL:"photoUrl",Name:"nickname",Email:"email",Password:"image/",DOC:"added",Description:"mydesc",UPLOAD_CHANGED:"state_changed",PREFIX_IMAGE:"image/",CurrentUserdocKey:""},w=r.a.createContext(),U=function(e){var t=e.children,a=Object(n.useState)(localStorage.getItem(O.Name)),s=Object(d.a)(a,2),c=s[0],l=s[1];return Object(n.useEffect)((function(){y.onAuthStateChanged((function(e){l(localStorage.getItem(O.Name))}))}),[]),r.a.createElement(w.Provider,{value:{currentUser:c,setCurrentUser:l}},t)},I=a(13),N=a.n(I),A=a(50),k=a(65),j=a(41),x=(a(135),Object(o.g)((function(e){var t=Object(n.useContext)(w).currentUser;return r.a.createElement("div",null,r.a.createElement(A.a,{className:"navbar_bg",expand:"lg"},r.a.createElement(A.a.Brand,{href:"/"},"LMS"),r.a.createElement(A.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(A.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(k.a,{className:"mr-auto"},t?r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a.Link,{href:"/chat"},"Chat"),r.a.createElement(k.a.Link,{href:"/"},"Online support")):r.a.createElement(r.a.Fragment,null)),r.a.createElement(p.a,null,r.a.createElement(j.a,{title:"Profile"},t?r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a.Item,{onClick:function(){y.signOut(),e.history.push("/"),localStorage.clear()}},"Logout")):r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a.Item,{as:l.b,to:"/login"},"Login"),r.a.createElement(j.a.Divider,null),r.a.createElement(j.a.Item,{as:l.b,to:"/register"},"Register")))))))}))),L=Object(o.g)((function(e){var t=e.history,a=Object(n.useState)(""),s=Object(d.a)(a,2),c=s[0],i=s[1],b=Object(n.useState)(""),v=Object(d.a)(b,2),y=v[0],S=v[1],C=Object(n.useState)(""),O=Object(d.a)(C,2),U=O[0],I=O[1],A=Object(n.useState)(""),k=Object(d.a)(A,2),j=k[0],L=k[1],P=Object(n.useState)(""),R=Object(d.a)(P,2),F=R[0],D=R[1],B=Object(n.useState)(!1),M=Object(d.a)(B,2),Q=M[0],V=M[1],W=function(e){D("");var t=e.target,a=t.name,n=t.value;"email"===a?(i(n),S(n?"":"Value is Required")):"password"===a&&(I(n),L(n?"":"Value is Required"))},X=function(){var e=Object(m.a)(u.a.mark((function e(a){var n,r,s,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),V(!0),c&&U){e.next=6;break}return V(!1),D("Please fill all mandatory fields"),e.abrupt("return",!1);case 6:if(!y&&!j){e.next=10;break}return V(!1),D("Please check the error"),e.abrupt("return",!1);case 10:return e.next=12,N.a.get("https://us-central1-clear-gantry-283402.cloudfunctions.net/app/findUser/".concat(c));case 12:if(void 0===(n=e.sent).data.uid){e.next=32;break}return e.next=16,N.a.get("https://us-central1-clear-gantry-283402.cloudfunctions.net/app/getUserDetails/".concat(n.data.uid,"/").concat(U));case 16:if(!(r=e.sent).data){e.next=30;break}if(r.data){e.next=24;break}return V(!1),D("Please enter correct password"),e.abrupt("return",!1);case 24:return s=n.data.uid,e.next=27,N.a.get("https://dhrzvmfzw6.execute-api.us-east-1.amazonaws.com/dev/question?uid=".concat(s));case 27:l=e.sent,V(!1),t.push({pathname:"/loginsecondfactor",state:{uid:n.data.uid,email:c,password:U,question:l.data.body,response:r.data}});case 30:e.next=35;break;case 32:return V(!1),D("Email not registered"),e.abrupt("return",!1);case 35:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useContext)(w).currentUser?r.a.createElement(o.a,{to:"/home"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(x,null),r.a.createElement(f.a,null,r.a.createElement("br",null),r.a.createElement(g.a,null,r.a.createElement(E.a,{sm:6},r.a.createElement("h1",null,"Login"),r.a.createElement(p.a,null,r.a.createElement(p.a.Group,{controlId:"formBasicLginEmail"},r.a.createElement(p.a.Label,null,"Email address*"),r.a.createElement(p.a.Control,{type:"email",placeholder:"Enter email",name:"email",value:c,onChange:W,onBlur:W}),r.a.createElement("div",null,y)),r.a.createElement(p.a.Group,{controlId:"formBasicLoginPassword"},r.a.createElement(p.a.Label,null,"Password*"),r.a.createElement(p.a.Control,{type:"password",placeholder:"Password",name:"password",value:U,onChange:W,onBlur:W}),r.a.createElement("div",null,j)),r.a.createElement("h4",null,F),r.a.createElement(h.a,{variant:"primary",onClick:X,disabled:Q},Q&&r.a.createElement("i",{className:"fa fa-refresh fa-spin",style:{marginRight:"5px"}}),"Submit"),r.a.createElement(l.c,{to:"/register",className:"link"},r.a.createElement("p",null,"Doesn't have an account? Sign Up here.")))))))})),P=RegExp(/^\w+([-]?\w+)*@\w+([-]?\w+)*(\.\w{2,})+$/),R=RegExp(/(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{7,}/),F=Object(o.g)((function(e){var t=e.history,a=Object(n.useState)(""),s=Object(d.a)(a,2),c=s[0],o=s[1],i=Object(n.useState)(""),b=Object(d.a)(i,2),v=b[0],y=b[1],S=Object(n.useState)(""),C=Object(d.a)(S,2),O=C[0],w=C[1],U=Object(n.useState)(""),I=Object(d.a)(U,2),A=I[0],k=I[1],j=Object(n.useState)(""),L=Object(d.a)(j,2),F=L[0],D=L[1],B=Object(n.useState)(""),M=Object(d.a)(B,2),Q=M[0],V=M[1],W=Object(n.useState)(""),X=Object(d.a)(W,2),K=X[0],q=X[1],z=Object(n.useState)(""),G=Object(d.a)(z,2),T=G[0],H=G[1],Z=Object(n.useState)(""),Y=Object(d.a)(Z,2),J=Y[0],_=Y[1],$=Object(n.useState)(""),ee=Object(d.a)($,2),te=ee[0],ae=ee[1],ne=Object(n.useState)("Select the question"),re=Object(d.a)(ne,2),se=re[0],ce=re[1],le=Object(n.useState)(""),oe=Object(d.a)(le,2),ie=oe[0],ue=oe[1],me=Object(n.useState)(""),de=Object(d.a)(me,2),pe=de[0],he=de[1],fe=Object(n.useState)(""),ge=Object(d.a)(fe,2),Ee=ge[0],be=ge[1],ve=Object(n.useState)(""),ye=Object(d.a)(ve,2),Se=ye[0],Ce=ye[1],Oe=Object(n.useState)(!1),we=Object(d.a)(Oe,2),Ue=we[0],Ie=we[1],Ne=function(e){Ce("");var t=e.target,a=t.name,n=t.value;"name"===a?o((function(){return y(n?"":"Value is Required"),n})):"email"===a?w((function(){return k(n?"":"Value is Required"),P.test(n)?k(""):k("Please enter valid email address"),n})):"password"===a?(D(n),V(n?"":"Value is Required"),R.test(n)?V(""):V("Weak Password"),H(K!==F?"Password doesn't match":"")):"confirmpassword"===a?(q(n),H(n!==F?"Password doesn't match":"")):"organization"===a?(_(n),ae(n?"":"Value is Required")):"question"===a?(ce(n),ue("Select the question"!==n?"":"Please select the question")):"answer"===a&&(he(n),be(n?"":"Value is Required"))},Ae=function(){var e=Object(m.a)(u.a.mark((function e(a){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),Ie(!0),c&&O&&F&&K&&J&&se&&pe){e.next=6;break}return Ce("Please fill all mandatory fields"),Ie(!1),e.abrupt("return",!1);case 6:if(!(v||A||Q||T||te||ie||Ee)){e.next=10;break}return Ce("Please check the error"),Ie(!1),e.abrupt("return",!1);case 10:return e.next=12,N.a.get("https://us-central1-clear-gantry-283402.cloudfunctions.net/app/findUser/".concat(O));case 12:if(void 0!==e.sent.data.uid){e.next=49;break}return e.next=16,N.a.post("https://us-central1-clear-gantry-283402.cloudfunctions.net/app/createUser",{email:O,password:F});case 16:return n=e.sent,e.next=19,N.a.post("https://us-central1-clear-gantry-283402.cloudfunctions.net/app/postUserDetails",{id:n.data.uid,email:O,password:F,name:c,organization:J});case 19:if(r=e.sent,void 0===n.data.uid||""===r.data){e.next=40;break}return e.next=23,N.a.post("https://dhrzvmfzw6.execute-api.us-east-1.amazonaws.com/dev/users",{uid:n.data.uid,question:se,answer:pe});case 23:if(!e.sent.data.body){e.next=30;break}Ie(!1),Ce("User registered Successfully"),t.push("/login"),e.next=38;break;case 30:return e.next=32,N.a.delete("https://us-central1-clear-gantry-283402.cloudfunctions.net/app/deleteUser/".concat(n.data.uid));case 32:return e.next=34,N.a.delete("https://us-central1-clear-gantry-283402.cloudfunctions.net/app/deleteUserDetails/".concat(n.data.uid));case 34:return Ce("Error Occured... User not registered"),Ie(!1),t.push("/register"),e.abrupt("return",!1);case 38:e.next=47;break;case 40:return e.next=42,N.a.delete("https://us-central1-clear-gantry-283402.cloudfunctions.net/app/deleteUser/".concat(n.data.uid));case 42:return e.next=44,N.a.delete("https://us-central1-clear-gantry-283402.cloudfunctions.net/app/deleteUserDetails/".concat(n.data.uid));case 44:return Ie(!1),Ce("Error Occured... User not registered"),e.abrupt("return",!1);case 47:e.next=52;break;case 49:return Ie(!1),Ce("Email already present"),e.abrupt("return",!1);case 52:Ie(!1);case 53:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(x,null),r.a.createElement(f.a,null,r.a.createElement("br",null),r.a.createElement(g.a,null,r.a.createElement(E.a,{sm:6},r.a.createElement("h4",null,"REGISTER"),r.a.createElement(p.a,null,r.a.createElement(p.a.Group,{controlId:"formBasicName"},r.a.createElement(p.a.Label,null,"Name*"),r.a.createElement(p.a.Control,{type:"text",placeholder:"Enter Name",name:"name",value:c,onChange:Ne,onBlur:Ne}),r.a.createElement("div",null,v)),r.a.createElement(p.a.Group,{controlId:"formBasicEmail"},r.a.createElement(p.a.Label,null,"Email address*"),r.a.createElement(p.a.Control,{type:"email",placeholder:"Enter email",name:"email",value:O,onChange:Ne,onBlur:Ne}),r.a.createElement("div",null,A)),r.a.createElement(p.a.Group,{controlId:"formBasicPassword"},r.a.createElement(p.a.Label,null,"Password*"),r.a.createElement(p.a.Control,{type:"password",placeholder:"Password",name:"password",value:F,onChange:Ne,onBlur:Ne}),r.a.createElement("div",null,Q)),r.a.createElement(p.a.Group,{controlId:"formBasicConfirmPassword"},r.a.createElement(p.a.Label,null,"Confirm Password*"),r.a.createElement(p.a.Control,{type:"password",placeholder:"Confirm Password",name:"confirmpassword",value:K,onChange:Ne,onBlur:Ne}),r.a.createElement("div",null,T)),r.a.createElement(p.a.Group,{controlId:"formBasicOrganization"},r.a.createElement(p.a.Label,null,"Organization*"),r.a.createElement(p.a.Control,{type:"text",placeholder:"Organization",name:"organization",value:J,onChange:Ne,onBlur:Ne}),r.a.createElement("div",null,te)),r.a.createElement("h4",null,Se),r.a.createElement(h.a,{variant:"primary",disabled:Ue,onClick:Ae},Ue&&r.a.createElement("i",{className:"fa fa-refresh fa-spin",style:{marginRight:"5px"}}),"Submit"),r.a.createElement(l.c,{to:"/login",className:"link"},r.a.createElement("p",null,"Already have an account? Login here.")))),r.a.createElement(E.a,{sm:6},r.a.createElement("h4",null,"Security Question and Answer"),r.a.createElement(p.a,null,r.a.createElement(p.a.Group,{controlId:"formQuestion"},r.a.createElement(p.a.Label,null,"Question*"),r.a.createElement(p.a.Control,{as:"select",custom:!0,onChange:Ne,onBlur:Ne,value:se,name:"question"},r.a.createElement("option",{value:"Select the question",hidden:!0},"Select the question"),r.a.createElement("option",{value:"What is your favourite destination?"},"What is your favourite destination?"),r.a.createElement("option",{value:"What is the name of your first pet?"},"What is the name of your first pet?"),r.a.createElement("option",{value:"what is the name of your oldest cousin?"},"what is the name of your oldest cousin?")),r.a.createElement("div",null,ie)),r.a.createElement(p.a.Group,{controlId:"formAnswer"},r.a.createElement(p.a.Label,null,"Answer*"),r.a.createElement(p.a.Control,{type:"text",placeholder:"Enter Answer",name:"answer",value:pe,onChange:Ne,onBlur:Ne}),r.a.createElement("div",null,Ee)))))))})),D=a(95),B=function(e){var t=e.component,a=Object(D.a)(e,["component"]),n=localStorage.getItem(O.Name);return r.a.createElement(o.b,Object.assign({},a,{render:function(e){return n?r.a.createElement(t,e):r.a.createElement(o.a,{to:"/login"})}}))},M=(a(142),function(e){var t,a,s,c,l,o=e.history,i=e.location,b=Object(n.useState)(""),v=Object(d.a)(b,2),S=v[0],C=v[1],U=Object(n.useState)(""),I=Object(d.a)(U,2),k=I[0],j=I[1],x=Object(n.useState)(""),L=Object(d.a)(x,2),P=L[0],R=L[1],F=Object(n.useState)(!1),D=Object(d.a)(F,2),B=D[0],M=D[1],Q=Object(n.useContext)(w).setCurrentUser,V=(null===i||void 0===i||null===(t=i.state)||void 0===t?void 0:t.email)||null,W=(null===i||void 0===i||null===(a=i.state)||void 0===a?void 0:a.password)||null,X=(null===i||void 0===i||null===(s=i.state)||void 0===s?void 0:s.uid)||null,K=(null===i||void 0===i||null===(c=i.state)||void 0===c?void 0:c.question)||null,q=(null===i||void 0===i||null===(l=i.state)||void 0===l?void 0:l.response)||null,z=function(e){localStorage.setItem(O.Name,e.name),localStorage.setItem(O.ID,e.id),localStorage.setItem(O.PhotoURL,e.URL)},G=function(e){R("");var t=e.target,a=t.name,n=t.value;"answer"===a&&(C(n),j(n?"":"Value is Required"))},T=function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),M(!0),S){e.next=6;break}return M(!1),R("Please fill all mandatory fields"),e.abrupt("return",!1);case 6:if(!k){e.next=10;break}return M(!1),R("Please check the error"),e.abrupt("return",!1);case 10:return e.next=12,N.a.get("https://dhrzvmfzw6.execute-api.us-east-1.amazonaws.com/dev/users?uid=".concat(X,"&answer=").concat(S));case 12:if("User Autheticated Successfully"!==e.sent.data.body){e.next=17;break}y.signInWithEmailAndPassword(V,W).then((function(e){M(!1),z(q),Q(e),o.push("/chat")})).catch((function(e){M(!1);var t=e.message;R(t)})),e.next=20;break;case 17:return M(!1),R("Please enter the correct answer"),e.abrupt("return",!1);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(A.a,null),r.a.createElement(f.a,null,r.a.createElement("br",null),r.a.createElement(g.a,null,r.a.createElement(E.a,{sm:6},r.a.createElement("h1",null,"Answer the Security Question"),r.a.createElement(p.a,null,r.a.createElement(p.a.Group,{controlId:"formQuestion"},r.a.createElement(p.a.Label,null,"Question"),r.a.createElement(p.a.Control,{type:"text",placeholder:"Enter Question",name:"question",value:K,onChange:G,onBlur:G,disabled:!0})),r.a.createElement(p.a.Group,{controlId:"formAnswer"},r.a.createElement(p.a.Label,null,"Answer*"),r.a.createElement(p.a.Control,{type:"text",placeholder:"Enter Answer",name:"answer",value:S,onChange:G,onBlur:G}),r.a.createElement("div",null,k)),r.a.createElement("h4",null,P),r.a.createElement(h.a,{variant:"primary",onClick:T,disabled:B},B&&r.a.createElement("i",{className:"fa fa-refresh fa-spin",style:{marginRight:"5px"}}),"Submit"))))))}),Q=a(93),V=a(22),W=a(23),X=a(26),K=a(25),q=a(24),z=(a(143),a(144),a(185)),G=a(70),T=a.n(G),H=a(54),Z=a.n(H),Y=a(91),J=a.n(Y),_=function(e){Object(K.a)(a,e);var t=Object(q.a)(a);function a(e){var n;return Object(V.a)(this,a),(n=t.call(this,e)).getListHistory=function(){n.removeListener&&n.removeListener(),n.listMessage.length=0,n.setState({isLoading:!0}),n.hashString(n.currentUserId)<=n.hashString(n.currentPeerUser.id)?n.groupChatId="".concat(n.currentUserId,"-").concat(n.currentPeerUser.id):n.groupChatId="".concat(n.currentPeerUser.id,"-").concat(n.currentUserId),n.removeListener=S.collection("Messages").doc(n.groupChatId).collection(n.groupChatId).onSnapshot((function(e){e.docChanges().forEach((function(e){e.type===O.DOC&&n.listMessage.push(e.doc.data())})),n.setState({isLoading:!1})}),(function(e){n.props.showToast(0,e.toString())}))},n.openListSticker=function(){n.setState({isShowSticker:!n.state.isShowSticker})},n.onSendMessage=function(e,t){if(n.state.isShowSticker&&2===t&&n.setState({isShowSticker:!1}),""!==e.trim()){var a=T()().valueOf().toString(),r={idFrom:n.currentUserId,idTo:n.currentPeerUser.id,timestamp:a,content:e.trim(),type:t};S.collection("Messages").doc(n.groupChatId).collection(n.groupChatId).doc(a).set(r).then((function(){n.setState({inputValue:""})}))}},n.scrollToBottom=function(){n.messagesEnd&&n.messagesEnd.scrollIntoView({})},n.onKeyPress=function(e){"Enter"===e.key&&n.onSendMessage(n.state.inputValue,0)},n.onChoosePhoto=function(e){e.target.files&&e.target.files[0]?(n.setState({isLoading:!0}),n.currentPhotoFile=e.target.files[0],0===e.target.files[0].type.toString().indexOf(O.PREFIX_IMAGE)?n.uploadPhoto():(n.setState({isLoading:!1}),n.props.showToast(0,"This file is not an image"))):n.setState({isLoading:!1})},n.uploadPhoto=function(){if(n.currentPhotoFile){var e=T()().valueOf().toString(),t=C.ref().child(e).put(n.currentPhotoFile);t.on(O.UPLOAD_CHANGED,null,(function(e){n.setState({isLoading:!1}),n.props.showToast(0,e.message)}),(function(){t.snapshot.ref.getDownloadURL().then((function(e){n.setState({isLoading:!1}),n.onSendMessage(e,1)}))}))}else n.setState({isLoading:!1}),n.props.showToast(0,"File is null")},n.hashString=function(e){for(var t=0,a=0;a<e.length;a++)t+=Math.pow(31*e.charCodeAt(a),e.length-a),t&=t;return t},n.renderListMessage=function(){if(n.listMessage.length>0){var e=[];return n.listMessage.forEach((function(t,a){t.idFrom===n.currentUserId?0===t.type?e.push(r.a.createElement("div",{className:"viewItemRight",key:t.timestamp},r.a.createElement("span",{className:"textContentItem"},t.content))):1==t.type&&e.push(r.a.createElement("div",{className:"viewWrapItemLeft",key:t.timestamp},r.a.createElement("img",{className:"imhg",src:t.content}))):0===t.type&&e.push(r.a.createElement("div",{className:"viewWrapItemLeft",key:t.timestamp},r.a.createElement("span",{className:"textContentItem"},t.content)))})),e}},n.state={isLoading:!1,isShowSticker:!1,inputValue:""},n.currentUserName=localStorage.getItem(O.Name),n.currentUserId=localStorage.getItem(O.ID),n.currentUserPhoto=localStorage.getItem(O.PhotoURL),n.currentPeerUser=n.props.currentPeerUser,n.groupChatId=null,n.listMessage=[],n.currentPeerUserMessages=[],n.removeListener=null,n.currentPhotoFile=null,S.collection("users").doc(n.currentPeerUser.documentKey).get().then((function(e){n.currentPeerUserMessages=e.data().messages})),n}return Object(W.a)(a,[{key:"componentDidUpdate",value:function(){this.scrollToBottom()}},{key:"componentWillReceiveProps",value:function(e){e.currentPeerUser&&(this.currentPeerUser=e.currentPeerUser,this.getListHistory())}},{key:"componentWillUnmount",value:function(){this.removeListener&&this.removeListener()}},{key:"componentDidMount",value:function(){this.getListHistory()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(z.a,{className:"chatbox"},r.a.createElement("div",{className:"headerChatBoard"},r.a.createElement("img",{className:"viewAvatarItem",src:this.currentPeerUser.URL,alt:""}),r.a.createElement("span",{className:"textHeaderChatBoard"},r.a.createElement("p",{style:{fontSize:"20px"}},this.currentPeerUser.name))),r.a.createElement("div",{className:"viewListContentChat"},this.renderListMessage(),r.a.createElement("div",{style:{float:"left",clear:"both"},ref:function(t){e.messagesEnd=t}})),r.a.createElement("div",{className:"viewBottom"},r.a.createElement("img",{className:"icOpenGallery",src:Z.a,alt:"icon open gallery",onClick:function(){return e.refInput.click()}}),r.a.createElement("input",{ref:function(t){e.refInput=t},accept:"image/*",className:"viewInputGallery",type:"file",onChange:this.onChoosePhoto}),r.a.createElement("input",{className:"viewInput",placeholder:"Type a message",value:this.state.inputValue,onChange:function(t){e.setState({inputValue:t.target.value})},onKeyPress:this.onKeyPress}),r.a.createElement("img",{className:"icSend",src:J.a,onClick:function(){e.onSendMessage(e.state.inputValue,0)}}))))}}]),a}(n.Component),$=(a(146),function(e){Object(K.a)(a,e);var t=Object(q.a)(a);function a(){return Object(V.a)(this,a),t.apply(this,arguments)}return Object(W.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("span",null,"Welcome, ".concat(this.props.currentUserName," ")),r.a.createElement("span",null,"Let's Connect"))}}]),a}(n.Component)),ee=function(e){Object(K.a)(a,e);var t=Object(q.a)(a);function a(e){var n;return Object(V.a)(this,a),(n=t.call(this,e)).onProfileClick=function(){n.props.history.push("/profile")},n.getListUser=Object(m.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.collection("users").get();case 2:(t=e.sent).docs.length>0&&([],Object(Q.a)(t.docs).forEach((function(e,t){n.searchUsers.push({key:t,documentKey:e.id,id:e.data().id,name:e.data().name,messages:e.data().messages,URL:e.data().URL})})),n.setState({isLoading:!1})),n.renderListUser();case 5:case"end":return e.stop()}}),e)}))),n.getClassnameforUserandNotification=function(e){var t="",a=!1;return n.state.currentPeerUser&&n.state.currentPeerUser.id===e?t="viewWrapItemFocused":(n.state.displayedContactSwitchedNotification.forEach((function(t){var n;(null===(n=t.notificationId)||void 0===n?void 0:n.length)>0&&t.notificationId===e&&(a=!0,t.number)})),t=!0===a?"viewWrapItemNotification":"viewWrapItem"),t},n.notificationErase=function(e){n.state.displayedContactSwitchedNotification.forEach((function(t){var a;(null===(a=t.notificationId)||void 0===a?void 0:a.length)>0&&t.notificationId!=e&&n.notificationMessagesErase.push({notificationId:t.notificationId,number:t.number})})),n.updaterenderList()},n.updaterenderList=function(){S.collection("users").doc(n.currentUserId).update({messages:n.notificationMessagesErase}),n.setState({displayedContactSwitchedNotification:n.notificationMessagesErase})},n.renderListUser=function(){if(n.searchUsers.length>0){var e=[],t="";n.searchUsers.map((function(a){a.id!=n.currentUserId&&(t=n.getClassnameforUserandNotification(a.id),e.push(r.a.createElement("button",{id:a.key,className:t,onClick:function(){n.notificationErase(a.id),n.setState({currentPeerUser:a}),document.getElementById(a.key).style.backgroundColor="#fff",document.getElementById(a.key).style.color="#fff"}},r.a.createElement("img",{className:"viewAvatarItem",src:a.URL,alt:""}),r.a.createElement("div",{className:"viewWrapContentItem"},r.a.createElement("span",{className:"textItem"},"".concat(a.name))),"viewWrapItemNotification"===t?r.a.createElement("div",{className:"notification"},r.a.createElement("p",{id:a.key,className:"newmessages"},"New message")):null)))})),n.setState({displayedContacts:e})}else console.log("no user present")},n.searchHandler=function(e){var t=e.target.value.toLowerCase(),a=n.searchUsers.filter((function(e){return-1!==e.name.toLowerCase().indexOf(t)}));n.displayedContacts=a,n.displayedSearchedContacts()},n.displayedSearchedContacts=function(){if(n.searchUsers.length>0){var e=[],t="";n.displayedContacts.map((function(a){a.id!=n.currentUserId&&(t=n.getClassnameforUserandNotification(a.id),e.push(r.a.createElement("button",{id:a.key,className:t,onClick:function(){n.notificationErase(a.id),n.setState({currentPeerUser:a}),document.getElementById(a.key).style.backgroundColor="#fff",document.getElementById(a.key).style.color="#fff"}},r.a.createElement("img",{className:"viewAvatarItem",src:a.URL,alt:""}),r.a.createElement("div",{className:"viewWrapContentItem"},r.a.createElement("span",{className:"textItem"},"".concat(a.name))),"viewWrapItemNotification"===t?r.a.createElement("div",{className:"notification"},r.a.createElement("p",{id:a.key,className:"newmessages"},"New message")):null)))})),n.setState({displayedContacts:e})}else console.log("no user present")},n.state={isLoading:!0,isOpenDialogConfirmLogout:!1,currentPeerUser:null,displayedContactSwitchedNotification:[],displayedContacts:[]},n.currentUserName=localStorage.getItem(O.Name),n.currentUserId=localStorage.getItem(O.ID),n.currentUserPhoto=localStorage.getItem(O.PhotoURL),n.currentUserMessages=[],n.searchUsers=[],n.notificationMessagesErase=[],n.onProfileClick=n.onProfileClick.bind(Object(X.a)(n)),n.getListUser=n.getListUser.bind(Object(X.a)(n)),n.renderListUser=n.renderListUser.bind(Object(X.a)(n)),n.getClassnameforUserandNotification=n.getClassnameforUserandNotification.bind(Object(X.a)(n)),n.notificationErase=n.notificationErase.bind(Object(X.a)(n)),n.updaterenderList=n.updaterenderList.bind(Object(X.a)(n)),n}return Object(W.a)(a,[{key:"componentDidMount",value:function(){var e=this;S.collection("users").doc(this.currentUserId).get().then((function(t){t.data().messages.map((function(t){e.currentUserMessages.push({notificationId:t.notificationId,number:t.number})})),e.setState({displayedContactSwitchedNotification:e.currentUserMessages})})),this.getListUser()}},{key:"render",value:function(){return r.a.createElement("div",{className:"root"},r.a.createElement(x,null),r.a.createElement("div",{className:"body"},r.a.createElement("div",{className:"viewListUser"},r.a.createElement("div",{className:"profileviewleftside"},r.a.createElement("img",{className:"ProfilePicture",alt:"",src:this.currentUserPhoto,onClick:this.onProfileClick})),r.a.createElement("div",{className:"rootsearchbar"},r.a.createElement("div",{className:"input-container"},r.a.createElement("input",{class:"input-field",type:"text",onChange:this.searchHandler,placeholder:"search"}))),this.state.displayedContacts),r.a.createElement("div",{className:"viewboard"},this.state.currentPeerUser?r.a.createElement(_,{currentPeerUser:this.state.currentPeerUser,showToast:this.props.showToast}):r.a.createElement($,{currentUserName:this.currentUserName,currentUserPhoto:this.currentUserPhoto}))))}}]),a}(n.Component),te=(a(147),a(183)),ae=function(e){Object(K.a)(a,e);var t=Object(q.a)(a);function a(e){var n;return Object(V.a)(this,a),(n=t.call(this,e)).state={name:"",aboutme:""},n.currentUserId=localStorage.getItem(O.ID),n.onChange=n.onChange.bind(Object(X.a)(n)),n.onSubmit=n.onSubmit.bind(Object(X.a)(n)),n}return Object(W.a)(a,[{key:"onChange",value:function(e,t){var a={};a[t]=e.target.value,this.setState(a)}},{key:"onSubmit",value:function(){console.log(this.state.name),S.collection("users").doc(y.getUid()).update({name:this.state.name,description:this.state.aboutme}),this.setState({isSubmitted:!0}),this.props.history.push("/chat")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(x,null),r.a.createElement("h2",{className:"heading"},"Profile"),r.a.createElement("form",{className:"form",onSubmit:this.onSubmit},r.a.createElement("div",{className:"form-fields"},r.a.createElement("br",null),r.a.createElement(te.a,{className:"text-field",required:!0,label:"Name",onBlur:this.isSubmitDisabled,onChange:function(t){return e.onChange(t,"name")},variant:"outlined"}),r.a.createElement("br",null)," ",r.a.createElement("br",null),r.a.createElement(te.a,{className:"textarea",label:"About me",multiline:!0,rows:5,onChange:function(t){return e.onChange(t,"aboutme")},variant:"outlined"}),r.a.createElement("br",null),r.a.createElement("input",{type:"submit",value:"Update",className:"enquire-btn"}))))}}]),a}(n.Component),ne=(a(148),"https://us-central1-serverlessproject-284221.cloudfunctions.net/uploadFiles"),re=function(e){Object(K.a)(a,e);var t=Object(q.a)(a);function a(e){var n;return Object(V.a)(this,a),(n=t.call(this,e)).onFileChange=function(e){n.setState({selectedFile:e.target.files[0]})},n.onFileUpload=Object(m.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!=n.state.selectedFile?(t=new FormData,"myFile",t.append("myFile",n.state.selectedFile,n.state.selectedFile.name),N.a.post(ne+"?organizationId=1223242424242",t).then((function(e){var t=n.state.uploadedFiles;t.push({filename:e.data.files.myFile.name,createdTime:e.data.files.myFile.mtime}),n.setState({uploadedFiles:t})}))):alert("Please upload a file");case 1:case"end":return e.stop()}}),e)}))),n.state={uploadedFiles:[],selectedFile:null},n}return Object(W.a)(a,[{key:"componentDidMount",value:function(){var e=this;N.a.get(ne).then((function(t){e.setState({uploadedFiles:t.data}),console.log(e.state.uploadedFiles)}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"container pt-4"},r.a.createElement("h3",{className:"text-center mt-4"},"Cloud Storage"),r.a.createElement("h4",{className:"text-center text-danger"},"By NuNu... \ud83d\ude97\ud83d\udd25"),r.a.createElement("div",{className:"row mt-4"},r.a.createElement("div",{className:"input-group col-sm-4 offset-sm-8"},r.a.createElement("div",{className:"custom-file"},r.a.createElement("input",{type:"file",className:"custom-file-input",onChange:this.onFileChange}),r.a.createElement("label",{className:"custom-file-label"},"Choose file")),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{className:"btn btn-primary",type:"button",onClick:this.onFileUpload},"Upload")))),r.a.createElement("table",{className:"table"},r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"File Name"),r.a.createElement("th",null,"Uploaded Time"))),r.a.createElement("tbody",null,this.state.uploadedFiles.map((function(e,t){return r.a.createElement("tr",null,r.a.createElement("td",null,t),r.a.createElement("td",null,e.filename),r.a.createElement("td",null,e.createdTime))})))))}}]),a}(n.Component),se=(a(149),function(e){Object(K.a)(a,e);var t=Object(q.a)(a);function a(){return Object(V.a)(this,a),t.apply(this,arguments)}return Object(W.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(x,null),r.a.createElement("div",{className:""},r.a.createElement("div",{className:""},r.a.createElement("h2",{className:"text"},"Services")),r.a.createElement("div",{className:"servicesDiv"},r.a.createElement("div",{className:"serviceDiv"},"Multi-factor Authentication"),r.a.createElement("div",{className:"serviceDiv"},"Online Support"),r.a.createElement("div",{className:"serviceDiv"},"Data Processing"),r.a.createElement("div",{className:"serviceDiv"},"Real Time Chat"),r.a.createElement("div",{className:"serviceDiv"},"Machine Learning"))))}}]),a}(n.Component));var ce=function(){return r.a.createElement(U,null,r.a.createElement(l.a,null,r.a.createElement(o.d,null,r.a.createElement(o.b,{exact:!0,path:"/",component:se}),r.a.createElement(o.b,{exact:!0,path:"/login",component:L}),r.a.createElement(o.b,{exact:!0,path:"/register",component:F}),r.a.createElement(B,{exact:!0,path:"/chat",component:ee}),r.a.createElement(B,{exact:!0,path:"/profile",component:ae}),r.a.createElement(B,{exact:!0,path:"/files",component:re}),r.a.createElement(o.b,{exact:!0,path:"/loginsecondfactor",component:M}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ce,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},54:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAclBMVEX///8AAAA7Ozurq6unp6c3Nzdzc3Nvb2/f39/j4+MODg76+vrx8fEqKioGBgbPz8++vr7X19fq6upUVFRCQkJbW1swMDCLi4sXFxcfHx+enp6RkZF7e3uGhoZISEhNTU1lZWXExMS3t7eBgYElJSWXl5dNMiH1AAADqklEQVR4nO3ca1uqQBSG4T0hpoAIWCSIJ8j//xd3brcJOAfNxbSm3uezdXFfQDAH+/MHIYQQQgghhBBCCN2Q71o7BUS41hMgzAKEW4BwCxBu/SbIwWPb812QqeIjDBoBwixAuAUItwDhFiDckkOy58/GTkMmrYMHxG6AcAsQbgHCLUBUZUm5WpVJNtwhy6OFTKrZ+aOzajLogfejhKQL0Wlhk0IIWceiV/w29OFfIoNEmz7j2DYannCKChL5MsfHL7UlIYKEL3KHEJvQBoMMMlY5hKhsMKgge7VDiLlDEMUNcurFHUiicwixdwbyqoe8ugIJr56E3QIbf7goIIYry861RQFZmSAHRyCtdUh5Y0cghntdiJ0jkN7b+3U2/mxRQHY/5Yw0JsjaEUjrd8jzHIFMTRAbMxEkryi53uFbcNBADE9EG89DGkgU6BxLK6NdmvHImw6ysuEggoSauyS3M2gnGrOnyosrsDRLRzUdlCjGJHFiAXGMbIKulkqCenjCKbop0/n7tWNmZwblGOHcb1T1TkpcWZswJV5WmI6Xl88ux1aXhYgXesJ9s/Df3/1Fs7c0VXoOS2/cAoRbgHALEG4Bwi1Ahm7qNdu8CERc+Iv1DaMBnpD5ZXPOqWKXGn6EISQspVMZr3oKO0i4KmSMY5VuZMANUksGzJ/lmpPCC5JtNYyPYvVcBiuI1xopKyQjByChceXrmGpGnA9kYlicOKdYNWIDSYyX1f9i+fYDLpDSsA2k1VJ6FEwg1c0Modg3xQISGlfqu8k2r3KAZE/3OUQseYlkAEl1D3N5ki/ofT+k1i5AKiptQKJ54nlePZ/cNPurXX5Udr3ASgzJykXrQim2TaLXRHfe5p81Q0LCUnLXxtuRepVkr3xlNxX0d1PQQbJKdbEHO/lCYmbc6KWpvy+abG+8kvGvYny1XjLV/4SpoHeeiSCl+U0p2DZ1etZMDovb30nk9Z6KJJD09idaUMzyvHgUcazonmIKyBvFcd1f933+cchU+Y2LgdvQQm4eR9DXOZpHIWtbRy2ps1XyMUj4yJPg4XIySHTv+zdxKRFk2pugtd6aBjL58osSVT4J5PsdnX24X4ZwcLSfiV+GzL/7n84dSwkg3AKEW4BwCxBuAcKtXwrZPbNtcxfEjQDhFiDcAoRbgHDrx0PGrnVQQFwOEG4Bwi1AuAUIt34TpB650MoM0f5HQ5YBwi1AuAUItwDh1k+H7J5cyA8uKSAIIYQQQgghhBBCqNNfxOVk6BsbT0kAAAAASUVORK5CYII="},91:function(e,t){e.exports="data:image/png;base64,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"}},[[100,1,2]]]);
//# sourceMappingURL=main.4ac0b1f8.chunk.js.map